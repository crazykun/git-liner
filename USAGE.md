# Git History Viewer 使用指南

## 🚀 快速开始

### 1. 安装插件
```bash
# 方法1: 使用安装脚本
./install.sh

# 方法2: 手动安装
code --install-extension git-history-viewer-0.0.1.vsix
```

### 2. 基本使用

#### 查看文件修改历史
1. 在VSCode中打开一个Git仓库
2. 打开任意已提交的文件
3. 右键选择 **"显示文件修改历史"**
4. 在弹出的列表中选择任意提交
5. 查看详细的提交信息和代码差异

#### 查看行修改历史
1. 在编辑器中选中特定的代码行
2. 右键选择 **"显示行修改历史"**
3. 查看该行的修改历史记录

## 📋 功能详解

### 🔍 文件历史功能
- **完整提交历史**: 显示文件的所有提交记录
- **提交信息**: 包含hash、作者、日期、提交消息
- **变更统计**: 显示每次提交的文件变更情况

### 📊 差异显示功能
- **提交详情**: 完整的提交信息（hash、作者、日期、消息）
- **代码差异**: 高亮显示的代码变更
- **特殊处理**: 
  - 新增文件：显示完整文件内容
  - 删除文件：显示删除提示
  - 修改文件：显示具体差异

### 🎯 界面特性
- **快速选择**: 通过QuickPick界面快速选择提交
- **侧边显示**: 差异内容在新标签页中显示
- **语法高亮**: 自动应用diff语法高亮

## 🛠️ 使用技巧

### 1. 命令面板访问
除了右键菜单，还可以通过命令面板使用：
- `Ctrl+Shift+P` → 输入 "Git History"
- 选择相应的命令

### 2. 键盘快捷键
可以在VSCode设置中为命令分配快捷键：
```json
{
  "key": "ctrl+alt+h",
  "command": "gitHistoryViewer.showFileHistory"
}
```

### 3. 工作区要求
- ✅ 必须是Git仓库
- ✅ 文件必须已提交到Git
- ✅ 确保Git在PATH中可用

## 🔧 故障排除

### 常见问题

#### 1. "请先打开一个文件"
**原因**: 没有在编辑器中打开文件
**解决**: 打开任意文件后再使用功能

#### 2. "未找到文件的修改历史"
**原因**: 
- 文件未提交到Git
- 当前目录不是Git仓库
**解决**: 
- 确保文件已提交：`git add . && git commit -m "提交"`
- 确保在Git仓库中：`git status`

#### 3. "该提交中没有找到文件的变更内容"
**原因**: 该提交确实没有修改此文件
**解决**: 这是正常情况，选择其他提交

#### 4. 空白差异页面
**原因**: Git命令执行失败
**解决**: 
- 检查Git是否正确安装
- 查看VSCode开发者工具的Console错误
- 确保文件路径正确

### 调试模式
1. 打开VSCode开发者工具：`Help → Toggle Developer Tools`
2. 切换到Console标签
3. 使用插件功能时观察日志输出

## 📈 高级用法

### 1. 批量查看历史
对于大型项目，可以：
1. 先查看文件历史了解整体变更
2. 再针对特定行查看详细修改

### 2. 代码审查
利用差异显示功能进行：
- 代码变更审查
- 历史版本对比
- 问题追溯

### 3. 学习代码演进
通过历史记录了解：
- 代码的演进过程
- 开发者的思路变化
- 功能的迭代历程

## 🎨 自定义配置

### VSCode设置
可以在settings.json中添加相关配置：
```json
{
  "git.enabled": true,
  "git.path": "/usr/bin/git"
}
```

### Git配置
确保Git配置正确：
```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

## 🚀 性能优化

### 大仓库优化
- 插件会自动限制历史记录数量
- 对于大文件，差异显示可能需要时间
- 建议在SSD上使用以获得更好性能

### 网络仓库
- 本地仓库性能最佳
- 远程仓库需要先同步到本地

## 📞 获取帮助

如果遇到问题：
1. 查看 `TROUBLESHOOTING.md`
2. 检查VSCode开发者工具的错误信息
3. 确认Git和VSCode版本兼容性
4. 提交Issue到项目仓库

## 🎯 最佳实践

1. **定期提交**: 保持良好的Git提交习惯
2. **清晰消息**: 编写有意义的提交消息
3. **小步提交**: 避免单次提交过多变更
4. **分支管理**: 合理使用Git分支功能

这样可以让插件发挥最大价值！